pico-8 cartridge // http://www.pico-8.com
version 29
__lua__
-- mem_main
-- Loads 16KB of string data from another cart fairly quickly.
-- 1. Load memory of another cart (mem_provider.p8)
-- 2. get string from its memory and print
-- 3. restore this carts original data


function mem2str(mem)
  r = ""
  str_len = peek2(mem)
  for i = 1, str_len do
    r = r..chr(peek(mem + 1 + i))
  end
  return r
end

print("start")
t_init = t()

-- the important part:

-- 3 reload calls appear to complete much faster (x5?. It's almost instant) than a single one despite t_duration begin larger.
-- Time does not advance when running reload, I think.
reload(0x0, 0x0, 0x4000, "mem_provider.p8")
reload(0x0, 0x0, 0x4000)
reload(0x0, 0x0, 0x4000, "mem_provider.p8")

result = mem2str(0)
reload(0x0, 0x0, 0x4000)
t_end = t()
t_duration = t_end - t_init

print("result: '"..result.."'.")
print("result length: "..tostr(#result))
print("result time: "..tostr(1000 * (t_duration) ) .. " ms")

__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
